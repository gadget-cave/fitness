<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gym Members Fee Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f1f1f1; padding: 20px; }
    h1 { text-align: center; }
    form, table { background: #fff; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
    input { padding: 10px; margin: 5px; border: 1px solid #ccc; border-radius: 5px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: center; }
    th { background: #333; color: white; }
    tr.expired { background: #ffe6e6; color: red; }
    .whatsapp-btn { background: green; color: white; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer; }
    .total-fees { font-size: 1.2em; font-weight: bold; text-align: right; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>üèãÔ∏è‚Äç‚ôÇÔ∏è Gym Members Fee Tracker</h1>
  <form id="memberForm">
    <input type="text" id="name" placeholder="Member Name" required />
    <input type="text" id="phone" placeholder="Phone Number (10 digits)" required />
    <input type="number" id="paidAmount" placeholder="Paid Amount (‚Çπ)" required min="500" step="500" />
    <button type="submit">Add Member</button>
  </form>

  <table id="memberTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Paid Amount</th>
        <th>Start Date</th>
        <th>Expiry Date</th>
        <th>Status</th>
        <th>WhatsApp Reminder</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="total-fees">Total Fees Collected: ‚Çπ<span id="totalFees">0</span></div>

  <script>
    const form = document.getElementById("memberForm");
    const tableBody = document.querySelector("#memberTable tbody");
    const totalFeesEl = document.getElementById("totalFees");

    let members = JSON.parse(localStorage.getItem("gym_members") || "[]");

    const renderTable = () => {
      tableBody.innerHTML = "";
      let total = 0;
      const today = new Date();
      members.forEach(member => {
        const start = new Date(member.startDate);
        const expiry = new Date(member.expiryDate);
        const isExpired = today > expiry;
        total += member.paidAmount;
        const row = document.createElement("tr");
        if (isExpired) row.classList.add("expired");

        row.innerHTML = `
          <td>${member.name}</td>
          <td>${member.phone}</td>
          <td>‚Çπ${member.paidAmount}</td>
          <td>${member.startDate}</td>
          <td>${member.expiryDate}</td>
          <td>${isExpired ? "Expired ‚ùå" : "Active ‚úÖ"}</td>
          <td><a class="whatsapp-btn" href="https://wa.me/91${member.phone}?text=Hi%20${member.name},%20your%20gym%20membership%20validity%20expired%20on%20${member.expiryDate}.%20Please%20pay%20your%20fees%20(‚Çπ500%20per%20month)%20to%20renew.%20Thank%20you!" target="_blank">Remind</a></td>
        `;
        tableBody.appendChild(row);
      });
      totalFeesEl.textContent = total;
    };

    form.onsubmit = (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const paidAmount = parseInt(document.getElementById("paidAmount").value);
      const days = (paidAmount / 500) * 30;
      const startDate = new Date();
      const expiryDate = new Date(startDate.getTime() + days * 24 * 60 * 60 * 1000);

      const member = {
        name,
        phone,
        paidAmount,
        startDate: startDate.toISOString().split('T')[0],
        expiryDate: expiryDate.toISOString().split('T')[0]
      };

      members.push(member);
      localStorage.setItem("gym_members", JSON.stringify(members));
      form.reset();
      renderTable();
    };

    renderTable();
  </script>
</body>
</html>
